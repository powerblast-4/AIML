import numpy as np
import pandas as pd
import matplotlib.pyplot as plt

titanic_df = pd.read_csv('/content/Cars.csv')
print(titanic_df)


fig, ax = plt.subplots(figsize=(10, 4))
ax.scatter(titanic_df['Horsepower'], titanic_df['Price'])
ax.set_xlabel('Horsepower')
ax.set_ylabel('Price')
plt.title('Scatter plot of Price vs Horsepower')
plt.show()


titanic_df['Horsepower'].plot(kind='box')
plt.title('Boxplot of Horsepower')
plt.show()

q1 = titanic_df['Horsepower'].quantile(0.25)
q3 = titanic_df['Horsepower'].quantile(0.75)
iqr = q3 - q1
upper_bound = q3 + (1.5 * iqr)
lower_bound = q1 - (1.5 * iqr)


outliers = titanic_df['Horsepower'][(titanic_df['Horsepower'] < lower_bound) | (titanic_df['Horsepower'] > upper_bound)]
print('The following are the outliers in the boxplot of Horsepower:\n', outliers)

titanic_df['Price'].plot(kind='hist', bins=20)
plt.title('Histogram of Price')
plt.xlabel('Price')
plt.show()


upper_index = titanic_df[titanic_df['Horsepower'] > upper_bound].index
lower_index = titanic_df[titanic_df['Horsepower'] < lower_bound].index
titanic_df.drop(index=upper_index, inplace=True)
titanic_df.drop(index=lower_index, inplace=True)

print(titanic_df.info())

titanic_df = pd.read_csv('/content/Cars.csv')
fare_arr = titanic_df['Price']
lower_cap = np.percentile(fare_arr, 1)
upper_cap = np.percentile(fare_arr, 99)

outliers_price = fare_arr[(fare_arr < lower_cap) | (fare_arr > upper_cap)]
print('The following are the outliers in the boxplot of Price:\n', outliers_price)


for i in titanic_df['Price'].unique():
    if i < lower_cap:
        titanic_df['Price'] = titanic_df['Price'].replace(i, lower_cap)
    elif i > upper_cap:
        titanic_df['Price'] = titanic_df['Price'].replace(i, upper_cap)

print(titanic_df.info())


titanic_df = pd.read_csv('/content/Cars.csv')
m = titanic_df['Horsepower'].mean()
for i in titanic_df['Horsepower'].unique():
    if i < lower_bound or i > upper_bound:
        titanic_df['Horsepower'] = titanic_df['Horsepower'].replace(i, m)


titanic_df = pd.read_csv('/content/Cars.csv')
q1 = titanic_df['Horsepower'].quantile(0.25)
q3 = titanic_df['Horsepower'].quantile(0.75)
iqr = q3 - q1
upper_bound = q3 + (1.5 * iqr)
lower_bound = q1 - (1.5 * iqr)

median_val = titanic_df['Horsepower'].median()
print('Median:', median_val)
for i in titanic_df['Horsepower'].unique():
    if i < lower_bound or i > upper_bound:
        titanic_df['Horsepower'] = titanic_df['Horsepower'].replace(i, median_val)